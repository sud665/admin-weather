# 환경 데이터 인사이트 대시보드 웹사이트 설계 문서

**작성일**: 2026-02-25
**프로젝트**: 기후변화 피해비용 산정 통합평가 모델 연구 결과 시각화
**최종 오픈 희망일**: 2026년 8월 말

---

## 1. 프로젝트 개요

EcoVision Research Lab의 일환으로, 'EcoVision 통합 환경분석 플랫폼'의 연구 결과값을 일반 시민, 정책 입안자, 동료 연구자에게 투명하게 공개하는 인터랙티브 웹사이트를 구축한다.

### 핵심 기능
- 사용자가 변수를 선택하면 사전 계산된 기후변화 피해비용(SCC 등)을 차트/그래프/표로 시각화
- EcoVision 환경분석 플랫폼 설명 페이지
- 관리자 CMS (설명 페이지 콘텐츠 + 시각화 설정 관리)

### 대상 사용자
- 일반 시민, 정책 입안자, 동료 연구자 (모두 균형 있게 고려)

---

## 2. 기술 스택

| 계층 | 기술 | 버전/비고 |
|------|------|----------|
| 프론트엔드 | Next.js (App Router) + TypeScript | v15 |
| 스타일링 | Tailwind CSS + shadcn/ui | 일관된 UI 컴포넌트 |
| 차트 | Recharts | 라인/바/히스토그램/산점도/영역 차트 |
| ORM | Drizzle ORM | 경량, 타입세이프, DB 이전 용이 |
| DB | PostgreSQL (로컬 Docker) | 운영 시 DB URL만 변경하여 이전 |
| 인증 | NextAuth.js | 관리자 전용 로그인 |
| 이미지 저장 | 로컬 public 폴더 (프로토타입) | 추후 외부 스토리지로 전환 가능한 추상화 레이어 |
| 배포 | Vercel (프론트) | 추후 서버 확정 시 결정 |
| 언어 | 한국어 단일 | - |

---

## 3. 페이지 구조

```
/                          → 메인 랜딩 (프로젝트 소개 + 시각화 진입)
/visualization             → 데이터 시각화 대시보드 (핵심 페이지)
/about                     → 모델 설명 메인
/about/background          → 연구 배경
/about/methodology         → 분석 방법론
/about/applications        → 활용 방안
/admin                     → 관리자 로그인
/admin/dashboard           → 관리자 대시보드
/admin/content             → 설명 페이지 콘텐츠 관리
/admin/visualization       → 시각화 설정 관리 (레이블, 설명 등)
```

---

## 4. 시각화 페이지 설계

### 4.1 레이아웃

```
┌──────────────────────────────────────────────────┐
│  헤더 (로고, 네비게이션)                            │
├──────────┬───────────────────────────────────────┤
│          │                                       │
│  변수     │    메인 차트 영역                       │
│  선택     │    ┌─────────────────────────────┐    │
│  패널     │    │  라인 차트 (SCC 시계열)       │    │
│          │    └─────────────────────────────┘    │
│ [세트1]  │    ┌────────────┬────────────────┐    │
│  ○ 값1   │    │ 바 차트     │ 산점도          │    │
│  ○ 값2   │    │ (시나리오별) │ (변수 관계)     │    │
│  ○ 값3   │    └────────────┴────────────────┘    │
│  ...     │                                       │
│ [세트2]  │    ┌─────────────────────────────┐    │
│  ...     │    │  데이터 테이블 (상세 수치)      │    │
│ [세트3]  │    └─────────────────────────────┘    │
│  ...     │                                       │
│ [세트4]  │    [ CSV 다운로드 ] [ 이미지 저장 ]    │
│  ...     │                                       │
├──────────┴───────────────────────────────────────┤
│  푸터                                             │
└──────────────────────────────────────────────────┘
```

### 4.2 변수 선택 UI
- 4개 변수 세트를 아코디언 또는 탭으로 구분
- 각 세트 내 27개 값을 드롭다운/라디오/슬라이더로 선택
- 27개 값 = 3개 하위 파라미터 x 3단계(저/중/고) 조합 예상

### 4.3 변수 세트 예측 (연구팀 확인 필요)

| 세트 | 변수 종류 | 하위 파라미터 예시 |
|------|----------|------------------|
| 1 | 할인율 (Discount Rate) | 순시간선호율 x 소비탄력성 x 성장률 |
| 2 | 기후 시나리오 (Climate Scenario) | SSP-RCP x 기후민감도 x 탄소순환 |
| 3 | 피해함수 (Damage Function) | 함수유형 x 지역가중치 x 비선형도 |
| 4 | 사회경제 경로 (Socioeconomic) | GDP성장률 x 인구전망 x 기술발전 |

### 4.4 차트 유형
- 라인 차트: SCC 시계열 변화 추이
- 바 차트: 시나리오별 비교
- 히스토그램: 확률 분포
- 산점도: 변수 간 관계
- 영역 차트: 불확실성 범위 (신뢰구간)
- 데이터 테이블: 상세 수치 확인

### 4.5 인터랙션
- 변수 선택 시 차트 동적 업데이트
- 차트 호버 시 툴팁으로 상세 값 표시
- CSV 다운로드 기능
- 차트 이미지 저장 기능

---

## 5. 데이터 흐름

```
[사용자 변수 선택]
  → [API 요청: GET /api/visualization?set1=X&set2=Y&set3=Z&set4=W]
  → [DB 조회: 사전 계산된 결과 매칭]
  → [JSON 응답]
  → [Recharts 렌더링]
```

- 실시간 연산 없음. 모든 결과는 사전 계산되어 DB에 저장
- 프로토타입: 목업 JSON 데이터 사용
- 이후: 실제 데이터 매핑 시 API만 DB 연결로 전환

---

## 6. DB 스키마 (핵심 테이블)

```sql
-- 변수 세트 정의
variable_sets (id, name, description, order)

-- 각 세트의 값 정의
variable_values (id, set_id, name, value, description, order)

-- 사전 계산된 시각화 결과
visualization_results (
  id,
  set1_value_id, set2_value_id, set3_value_id, set4_value_id,
  year, scc_value, temperature, damage_cost, ...
  created_at
)

-- CMS 페이지 콘텐츠
pages (id, slug, title, content, published, updated_at)

-- 페이지 이미지
page_images (id, page_id, filename, path, alt_text, order)

-- 시각화 설정 (관리자 수정 가능)
chart_settings (id, chart_key, title, x_label, y_label, unit, description)

-- 관리자 계정
admin_users (id, email, password_hash, name, created_at)
```

---

## 7. 관리자 CMS 기능

| 기능 | 상세 |
|------|------|
| 콘텐츠 편집 | 설명 페이지 텍스트(리치텍스트) 수정 |
| 이미지 관리 | 설명 페이지 이미지 업로드/교체/삭제 |
| 시각화 설정 | 차트 제목, 축 레이블, 변수명, 단위, 설명 텍스트 수정 |
| 미리보기 | 수정 사항을 저장 전 미리보기 |
| 게시 관리 | 콘텐츠 공개/비공개 전환 |

---

## 8. 인증

- 일반 사용자: 로그인 없이 모든 공개 페이지 접근 가능
- 관리자: NextAuth.js 기반 이메일/패스워드 로그인
- /admin 경로는 인증 미들웨어로 보호

---

## 9. 이미지 스토리지 전략

- 프로토타입: Next.js public 폴더에 로컬 저장
- 스토리지 추상화 레이어 구현 (interface)
  - LocalStorageAdapter (프로토타입)
  - CloudinaryAdapter / S3Adapter (운영 전환 시)
- 전환 시 어댑터만 교체하면 됨

---

## 10. 개발 단계

| Phase | 내용 | 산출물 |
|-------|------|--------|
| 1 | 프로젝트 셋업 + 목업 데이터로 시각화 UI | 시각화 프로토타입 |
| 2 | Docker PostgreSQL + Drizzle 스키마 | DB 구조 |
| 3 | 관리자 CMS 페이지 | 관리자 기능 |
| 4 | 실제 데이터 매핑 및 DB 적재 | 데이터 통합 |
| 5 | 배포 환경 구성 | 운영 배포 |

---

## 11. 참고 사이트

- MetaSCC: https://richardtol.shinyapps.io/MetaSCC/
- WebDICE: http://webdice.rdcep.org/advanced#option:parameters

---

## 12. 디자인 원칙

- PC Web 기준 반응형 지원
- 전문 용어는 툴팁이나 도움말로 쉽게 설명
- 정부/공공기관 느낌의 신뢰감 있는 디자인
- 접근성(a11y) 고려: 색각이상자를 위한 차트 팔레트 등
